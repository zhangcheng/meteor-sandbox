<head>
  <title>meteor-sandbox</title>
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/store.js/1.1.1/store.min.js"></script>
</head>

<body>
  {{> main}}
</body>

<template name="main">
  <header>
    {{#if user}}
    {{#with user}}
      <label>Username: {{username}}</label>
      <button class="btn logoutButton">Logout</button>
    {{/with}}
    {{else}}
      <label>Username:</label>
      <input id="username" name="username" type="text">
      <button class="btn loginButton">Login</button>
    {{/if}}
  </header>
  <br />
  <article>
    {{> home}}
    <br />
    {{#if current_page_is "profile"}}
    {{> profile}}
    {{/if}}
  </article>
</template>

<template name="home">
  <a href="/">home</a>
  <ul>
  {{#each users}}
    <li><a href="/u/{{username}}">{{username}}</a></li>
  {{/each}}
  </ul>
</template>

<template name="profile">
  <p>profile</p>
  {{#if is_oneself}}
  <p>myself</p>
  {{/if}}
  {{#if thisuser}}
  <p>user: {{thisuser.username}}</p>
  {{/if}}
  {{#unless is_followed}}
  <a href="#">follow</a>
  {{/unless}}
</template>
